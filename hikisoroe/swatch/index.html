<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title data-i18n="title">ğŸ§¶ ã‚²ãƒ¼ã‚¸è¨ˆç®—ãƒ„ãƒ¼ãƒ« | Swatch Calculator</title>
<meta name="description" content="ç·¨ã¿ç‰©ã®ã‚²ãƒ¼ã‚¸ã‹ã‚‰ä½œå“ã‚µã‚¤ã‚ºã«å¿…è¦ãªç›®æ•°ãƒ»æ®µæ•°ã‚’è‡ªå‹•è¨ˆç®—ã—ã¾ã™ã€‚">

<style>
.container{
max-width:720px;
margin:40px auto;
padding:32px;
background:#fff;
border-radius:16px;
box-shadow:0 4px 20px rgba(0,0,0,.05);
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}

h1{
text-align:center;
margin-bottom:24px;
}

.input-group{
margin-bottom:18px;
}

label{
font-weight:600;
display:block;
margin-bottom:6px;
}

input{
width:100%;
padding:10px;
border-radius:8px;
border:1px solid #ddd;
font-size:16px;
}

button{
width:100%;
padding:14px;
border:none;
border-radius:10px;
background:#007aff;
color:white;
font-size:18px;
font-weight:700;
cursor:pointer;
margin-top:10px;
}

button:hover{
background:#0063cc;
}

.result{
margin-top:28px;
padding:18px;
background:#f6f7f9;
border-radius:12px;
font-size:18px;
}

.lang{
text-align:right;
margin-bottom:10px;
}

.lang button{
background:none;
border:none;
color:#007aff;
font-weight:700;
cursor:pointer;
}

footer{
text-align:center;
margin-top:28px;
color:#999;
font-size:14px;
}
</style>
</head>

<body>

<div class="container">

<div class="lang">
<button onclick="setLang('ja')">JP</button> /
<button onclick="setLang('en')">EN</button>
</div>

<h1 data-i18n="title">ğŸ§¶ ã‚²ãƒ¼ã‚¸è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>

<div class="input-group">
<label data-i18n="stitchesGauge">ã‚²ãƒ¼ã‚¸ï¼ˆç›®æ•° / 10cmï¼‰</label>
<input id="stitchesGauge" type="number">
</div>

<div class="input-group">
<label data-i18n="rowsGauge">ã‚²ãƒ¼ã‚¸ï¼ˆæ®µæ•° / 10cmï¼‰</label>
<input id="rowsGauge" type="number">
</div>

<div class="input-group">
<label data-i18n="targetWidth">ä½œã‚ŠãŸã„å¹…ï¼ˆcmï¼‰</label>
<input id="targetWidth" type="number">
</div>

<div class="input-group">
<label data-i18n="targetHeight">ä½œã‚ŠãŸã„é«˜ã•ï¼ˆcmï¼‰</label>
<input id="targetHeight" type="number">
</div>

<button onclick="calculate()" data-i18n="calc">
è¨ˆç®—ã™ã‚‹
</button>

<div class="result" id="result">
â€”
</div>

<footer>
Free knitting tools by LemonJellyPool
</footer>

</div>

<script>

/* ========= i18n ========= */

const dict = {

ja:{
title:"ğŸ§¶ ã‚²ãƒ¼ã‚¸è¨ˆç®—ãƒ„ãƒ¼ãƒ«",
stitchesGauge:"ã‚²ãƒ¼ã‚¸ï¼ˆç›®æ•° / 10cmï¼‰",
rowsGauge:"ã‚²ãƒ¼ã‚¸ï¼ˆæ®µæ•° / 10cmï¼‰",
targetWidth:"ä½œã‚ŠãŸã„å¹…ï¼ˆcmï¼‰",
targetHeight:"ä½œã‚ŠãŸã„é«˜ã•ï¼ˆcmï¼‰",
calc:"è¨ˆç®—ã™ã‚‹",
result:"å¿…è¦ãªç›®æ•°ï¼š{s}ç›®\nå¿…è¦ãªæ®µæ•°ï¼š{r}æ®µ"
},

en:{
title:"ğŸ§¶ Swatch Calculator",
stitchesGauge:"Gauge (stitches / 10cm)",
rowsGauge:"Gauge (rows / 10cm)",
targetWidth:"Target width (cm)",
targetHeight:"Target height (cm)",
calc:"Calculate",
result:"Stitches needed: {s}\nRows needed: {r}"
}

};

function setLang(lang){
localStorage.setItem("lang",lang);
applyLang();
}

function applyLang(){

const lang = localStorage.getItem("lang") || "ja";
const t = dict[lang];

document.documentElement.lang = lang;

document.querySelectorAll("[data-i18n]").forEach(el=>{
const key = el.dataset.i18n;
if(t[key]) el.textContent = t[key];
});

}

applyLang();

/* ========= logic ========= */

function calculate(){

const stitchesGauge = Number(document.getElementById("stitchesGauge").value);
const rowsGauge = Number(document.getElementById("rowsGauge").value);
const width = Number(document.getElementById("targetWidth").value);
const height = Number(document.getElementById("targetHeight").value);

if(!stitchesGauge || !rowsGauge || !width || !height){
return;
}

const stitches = Math.round(stitchesGauge/10 * width);
const rows = Math.round(rowsGauge/10 * height);

const lang = localStorage.getItem("lang") || "ja";

let text = dict[lang].result
.replace("{s}",stitches)
.replace("{r}",rows);

document.getElementById("result").innerText = text;

}

</script>

</body>
</html>
